<!DOCTYPE html>
<html lang="en">
{% include 'head.html' %}
<body>
{% include 'nav.html' %}

<div class="row">
  <div class="col s12 l3">
    <div class="collection">
      <div class="collection-item row valign-wrapper">
        <img src="/static/images/LeopardCat3.jpg" alt="" class="responsive-img"> 
      </div>
      <a href="#modal1" class="collection-item modal-trigger"><i class="material-icons left">vpn_key</i>Password</a>
      <a href="/ble_type" class="collection-item"><i class="material-icons left">settings_bluetooth</i>Edit BLE type</a>
      <a href="/logout" class="collection-item"><i class="material-icons left">exit_to_app</i>Logout</a>
    </div>
  </div>
</div>


<div id="modal1" class="modal">
  <div class="modal-content">
    <form action="/setting" method="POST">
      {{ form.csrf_token }}
      <h5>Change Password</h5>
      <input name="username" value="{{current_user.id}}" style="display:none">
      <div class="row">
        <div class="input-field col s12">
          <input id="password1" name="password1" type="password" class="validate" onkeyup="check();">
          <label for="password1"> {{form.password1.label}} </label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="password2" name="password2" type="password" class="validate" onkeyup="check();">
          <label for="password2"> {{form.password2.label}} </label>
        </div>
      </div>
      <p class="red-text" id="message"></p>
      <button class="btn teal accent-4" type="submit"> Submit </button>

    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems, {});
  });

  var check = function() {
  if (document.getElementById('password1').value ==
    document.getElementById('password2').value) {
    document.getElementById('message').style.color = 'green';
    document.getElementById('message').innerHTML = 'matching';
  } else {
    document.getElementById('message').style.color = 'red';
    document.getElementById('message').innerHTML = 'not matching';
  }
}


</script>
</body>
